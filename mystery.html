<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mystery Details - A Damn Fine Bridal Party</title>
    <link rel="stylesheet" href="./assets/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üå≤ A Damn Fine Bridal Party üå≤</h1>
            <p>The Case Files: A Toast to Secrets</p>
        </header>

        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="decor.html">Decor</a></li>
                <li><a href="food.html">Food</a></li>
                <li><a href="mystery.html">Mystery</a></li>
                <li><a href="schedule.html">Schedule</a></li>
                <li><a href="guests.html">Guests</a></li>
                <li><a href="admin.html">Station HQ</a></li>
            </ul>
        </nav>

        <div class="alert alert-danger">
            <strong>‚ö†Ô∏è FOR OUR EYES ONLY - TOP SECRET!</strong>
        </div>

        <div id="page-notes-container"></div>

        <div id="story-overview">
            <div class="loading">
                <div class="spinner"></div>
                <p>Loading the case files...</p>
            </div>
        </div>

        <div class="card">
            <h2>üé≠ Character Roles</h2>
            <p>These are the characters we've designed for our guests. Each one has a secret and a goal for the night.</p>
            <div class="alert alert-info">
                <strong>How the Mystery Works:</strong> Each guest gets a packet with their details. They'll need to stay in character and trade clues to solve the mystery by the end of the night!
            </div>
            <div id="character-list" class="grid grid-2">
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Loading characters...</p>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>üìÑ Individual Briefings</h2>
            <p>We can use the "Print Packet" buttons above to generate their files. Each one includes:</p>
            <ul class="item-list">
                <li>Their character name and role</li>
                <li>A detailed backstory</li>
                <li>Costume ideas we've come up with</li>
                <li>Their deep, dark secret</li>
                <li>What they are trying to achieve</li>
                <li>Personality notes to help them play the part</li>
            </ul>
            <div class="alert alert-warning">
                <strong>üí° Note for Us:</strong> We'll send the costume ideas and character intros early with their invites so they can prepare! We'll save the deep dark secrets and the investigation objectives for the sealed envelopes they'll open at the party.
            </div>
        </div>

        <div class="card">
            <h2>üé¨ Investigation Phases</h2>
            <p>This is how we'll move the story along during the party:</p>
            <div id="phase-controls">
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Loading phase controls...</p>
                </div>
            </div>
        </div>

        <div class="card" id="investigation-map-card">
            <h2>üó∫Ô∏è Master Investigation Map (Our Guide)</h2>
            <p>This map shows exactly who has what information and who they are told to talk to in each phase. We can use this to keep the story on track if anyone gets lost!</p>
            <div id="investigation-map">
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Loading the investigation map...</p>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>üî• How the Reveal Works</h2>
            <div class="alert alert-info">
                <strong>The "Big Burn" Ceremony:</strong>
                <ol>
                    <li><strong>The Prep:</strong> Each cupcake has a small piece of "flash paper" or heat-sensitive paper on a stick. On the back (hidden) is a single line of the story.</li>
                    <li><strong>The Advance:</strong> After Envelope 4 is opened, gather everyone around the dessert station.</li>
                    <li><strong>The Reveal:</strong> You (the Host) use the kitchen torch to light each cupcake's paper in order. As the paper burns away, the "Cherry Lie" is revealed!</li>
                    <li><strong>The Climax:</strong> Read each line aloud dramatically. The final cupcakes reveal Morgan's guilt and return the recipe to Norma.</li>
                </ol>
            </div>
        </div>

        <div class="card">
            <h2>üì¶ The Evidence Packets</h2>
            <p>Each guest will have 4 envelopes to open as we advance the investigation:</p>
            <div id="envelope-list">
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Loading envelope details...</p>
                </div>
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="btn" onclick="downloadClueKitZip()">
                    üì• Download Our Full Clue Kit (ZIP)
                </button>
                <p style="margin-top: 10px; font-size: 14px; color: #666;">
                    This will give us all the envelopes and our guide in one folder for easy printing.
                </p>
            </div>
        </div>

        <div class="card">
            <h2>üîç Director‚Äôs Guide to the Case</h2>
            <h3>Our Host Checklist:</h3>
            <ul class="item-list">
                <li>Print and seal all character files</li>
                <li>Hide the character cards under seats before anyone arrives</li>
                <li>Queue up our Twin Peaks soundtrack playlist</li>
                <li>Have the kitchen torch ready for the cupcake reveal ceremony</li>
                <li>Keep our solution notes close (but hidden!)</li>
                <li>Be ready with backup clues if guests get stuck</li>
                <li>Have our props ready (magnifying glasses, "evidence" bags, etc.)</li>
                <li>Set a signal for when the "murder" is officially announced</li>
            </ul>
            
            <h3 style="margin-top: 30px;">If They Need a Push:</h3>
            <div class="alert alert-info">
                <p><strong>Log Lady Prophecy:</strong> "Someone was seen purchasing a whole cherry pie the morning of the murder..."</p>
                <p><strong>Mysterious Whisper:</strong> "The Log Lady's log has been warning about elegance hiding darkness..."</p>
                <p><strong>Station Tip:</strong> "Check Laura's phone messages - she was meeting someone important..."</p>
            </div>
        </div>
    </div>

    <script src="./assets/app.js"></script>
    <script src="./assets/modules/render.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
