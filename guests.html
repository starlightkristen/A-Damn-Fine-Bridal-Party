<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guest Management - A Damn Fine Bridal Party</title>
    <link rel="stylesheet" href="./assets/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üå≤ A Damn Fine Bridal Party üå≤</h1>
            <p>Resident List & Character Assignments</p>
        </header>

        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="decor.html">Decor</a></li>
                <li><a href="food.html">Food</a></li>
                <li><a href="mystery.html">Mystery</a></li>
                <li><a href="schedule.html">Schedule</a></li>
                <li><a href="guests.html">Residents</a></li>
                <li><a href="admin.html">Station HQ</a></li>
            </ul>
        </nav>

        <div id="page-notes-container"></div>

        <div class="card">
            <h2>üë• Twin Peaks Residents</h2>
            <p>Our guest list for the big day. We can track RSVPs, assign their mystery characters, and generate their personalized invites here.</p>
            
            <div id="guest-table">
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Loading resident list...</p>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>üé≠ Character Assignment Guide</h2>
            
            <h3>The Roles We've Created:</h3>
            <div id="character-list-guide">
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Loading characters...</p>
                </div>
            </div>

            <div class="alert alert-warning">
                <strong>üí° Notes for Us:</strong>
                <ul>
                    <li>Let's match guest personalities to these roles for the best experience!</li>
                    <li>We should think about who would love a dramatic role vs. who might prefer something subtle.</li>
                    <li>The "Auto-Assign" feature is there if we want some inspiration based on the vibes we've noted.</li>
                </ul>
            </div>
        </div>

        <div class="card">
            <h2>‚úâÔ∏è Personalized Invitations</h2>
            <p>Once we assign a character, we can use these templates to send them a mysterious invite.</p>
            
            <h3>How to Use:</h3>
            <ol>
                <li>Assign characters to guests in the table above.</li>
                <li>Click "Copy Invite" for each guest.</li>
                <li>Paste it into our email or message to them!</li>
            </ol>

            <div class="alert alert-info">
                <strong>Our Invite Template:</strong>
                <p style="background: white; padding: 15px; border-radius: 5px; margin-top: 10px; font-style: italic;">
                    Dear [Guest Name],<br><br>
                    You're invited to "A Damn Fine Bridal Party" for Marlena!<br><br>
                    Join us for coffee, pie, mystery & celebration.<br><br>
                    <strong>üé≠ YOUR SECRET CHARACTER ASSIGNMENT:</strong><br>
                    Character: [Character Name]<br>
                    Role: [Role]<br><br>
                    <strong>‚ú® COSTUME IDEAS:</strong><br>
                    [Costume Ideas from character sheet]<br><br>
                    <strong>üìú YOUR BRIEFING:</strong><br>
                    [Briefing intro from character sheet]<br><br>
                    Come prepared to solve a mystery! You'll receive your secret case files in a sealed envelope at the party.<br><br>
                    "The owls are not what they seem..."<br><br>
                    RSVP by [DATE]<br>
                    Location: [TO BE ANNOUNCED]
                </p>
            </div>
        </div>

        <div class="card">
            <h2>üìä Resident Statistics</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <h3 id="stat-total">-</h3>
                    <p>Total Residents</p>
                </div>
                <div class="stat-card">
                    <h3 id="stat-confirmed">-</h3>
                    <p>Confirmed</p>
                </div>
                <div class="stat-card">
                    <h3 id="stat-assigned">-</h3>
                    <p>Characters Assigned</p>
                </div>
                <div class="stat-card">
                    <h3 id="stat-pending">-</h3>
                    <p>Pending</p>
                </div>
            </div>
        </div>
    </div>

    <script src="./assets/app.js"></script>
    <script src="./assets/modules/render.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async function() {
            await initApp();
            
            // Update stats after render
            const stats = calculateStats();
            document.getElementById('stat-total').textContent = stats.totalGuests;
            document.getElementById('stat-confirmed').textContent = stats.confirmedGuests;
            document.getElementById('stat-assigned').textContent = stats.assignedCharacters;
            document.getElementById('stat-pending').textContent = stats.pendingGuests;
        });
    </script>
</body>
</html>
